/* =========================================================
   _theme.scss — Signature theme for michaelmacdonagh.net
   Uses Bootstrap for layout; custom visuals everywhere else.
   ========================================================= */

/* -------------------------
   Core Theme Variables
   ------------------------- */
:root {
  /* Brand / Accent */
  --accent: #35ffa1;         /* neon mint */
  --accent-2: #7aa2ff;       /* secondary hover */
  --ink: #0f0f10;            /* deep background */
  --panel: #151517;          /* glass base for header/footer */
  --line: #232327;

  /* Text */
  --text: #e7e7ea;           /* light text on dark */
  --muted: #a7a7ae;
  --body: #1c1c1f;           /* body text on light */
  --paper: #f7f7f9;          /* page background (light) */

  /* Radii / Shadows / FX */
  --radius: 14px;
  --shadow: 0 10px 30px rgba(0,0,0,.25);
  --blur: 10px;

  /* Section helpers used in index.md */
  --bg: #0f0f10;             /* dark hero */
  --bg-elev: #151517;        /* elevated dark */

  /* Bootstrap tune (we’re overriding via CSS since Bootstrap comes via CDN) */
  --bs-primary: var(--accent);
  --bs-secondary: var(--accent-2);
  --bs-body-bg: var(--paper);
  --bs-body-color: var(--body);
  --bs-dark: var(--ink);
  --bs-light: #f2f2f4;
}

/* Respect system dark if desired later */
@media (prefers-color-scheme: dark) {
  :root {
    --bs-body-bg: #0d0d10;
    --bs-body-color: #e9e9ec;
  }
}

/* -------------------------
   Base & Typography
   ------------------------- */
html, body { height: 100%; }

body {
  background-color: var(--bs-body-bg);
  color: var(--bs-body-color);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  padding-bottom: 70px; /* room for footer if fixed later */
}

main > .container {
  padding-top: 2rem;
  padding-bottom: 4rem;
}

h1, h2, h3, h4, h5, h6 { letter-spacing: .2px; }
.display-5, .h1, .h2, .h3 { text-wrap: balance; }

/* Links */
a {
  color: var(--bs-primary);
  text-decoration: none;
  transition: color .15s ease, opacity .15s ease, text-shadow .15s ease;

  &:hover {
    color: var(--accent-2);
    text-decoration: underline;
  }

  &:focus-visible {
    outline: 2px solid var(--accent);
    outline-offset: 2px;
    border-radius: 6px;
    text-decoration: none;
  }
}

/* Reduce motion respect */
@media (prefers-reduced-motion: reduce) {
  * { transition: none !important; animation: none !important; }
}

/* -------------------------
   Signature Header
   ------------------------- */
.site-header {
  position: sticky; top: 0; z-index: 1000;
  background: rgba(15,15,16,.55);
  backdrop-filter: saturate(130%) blur(var(--blur));
  border-bottom: 1px solid rgba(255,255,255,.05);
  box-shadow: 0 6px 30px rgba(0,0,0,.25);
  transition: all .2s ease;

  &.is-scrolled {
    background: rgba(15,15,16,.75);
    border-bottom-color: rgba(255,255,255,.07);
  }
}

/* Brand */
.brand {
  .brand-dot {
    width: 10px; height: 10px; border-radius: 50%;
    background: var(--accent);
    box-shadow: 0 0 16px var(--accent);
    display: inline-block;
  }
  .brand-text { color: #fff; letter-spacing: .2px; }
}

/* Nav (custom, not Bootstrap default look) */
.nav-list {
  list-style: none;
  display: flex;
  gap: .25rem;
  padding-left: 0;
  margin: 0;

  .nav-link {
    --pad: .6rem .9rem;
    position: relative;
    display: inline-flex;
    align-items: center;
    padding: var(--pad);
    color: #dfe0e4;
    text-decoration: none;
    border-radius: 999px;
    transition: color .15s ease, background .15s ease, transform .15s ease;

    &:hover {
      color: #fff;
      background: rgba(122,162,255,.07);
      text-decoration: none;
    }

    &:focus-visible {
      outline: 2px solid var(--accent);
      outline-offset: 2px;
    }

    /* Active/hover underline “rail” */
    &::after {
      content: "";
      position: absolute; left: 12px; right: 12px; bottom: 8px; height: 2px;
      background: linear-gradient(90deg, transparent, var(--accent), transparent);
      transform: scaleX(0);
      transform-origin: center;
      transition: transform .2s ease;
      border-radius: 2px;
    }

    &:hover::after,
    &[aria-current="page"]::after {
      transform: scaleX(1);
    }
  }
}

/* Mobile toggler harmony (when not using navbar-dark) */
.navbar-toggler { border: 1px solid rgba(255,255,255,.25); }
.navbar-toggler-icon { filter: invert(1); }

/* -------------------------
   Signature Footer
   ------------------------- */
.site-footer {
  margin-top: 3rem;
  background:
    linear-gradient(180deg, rgba(53,255,161,.06), rgba(122,162,255,.05)),
    radial-gradient(700px 400px at 10% -20%, rgba(122,162,255,.08), transparent 60%),
    var(--ink);
  color: var(--text);
  border-top: 1px solid var(--line);
  box-shadow: 0 -12px 40px rgba(0,0,0,.35) inset;

  .footer-grid {
    display: grid; grid-template-columns: 1fr auto 1fr; gap: 1rem;
    align-items: center; padding: 18px 0;
  }

  .footer-cell {
    &.left { justify-self: start; }
    &.center { justify-self: center; color: var(--muted); }
    &.right { justify-self: end; display: flex; gap: 1rem; flex-wrap: wrap; }
  }

  .footer-link {
    color: #cfd1d7; text-decoration: none; border-bottom: 1px dashed transparent;
    transition: color .15s ease, border-color .15s ease;

    &:hover { color: #fff; border-color: rgba(255,255,255,.35); }
    &:focus-visible {
      outline: 2px solid var(--accent);
      outline-offset: 3px;
      border-radius: 6px;
    }
  }

  /* If you decide to fix footer to bottom, uncomment:
  position: fixed; left: 0; right: 0; bottom: 0;
  and bump body bottom padding.
  */
}

/* -------------------------
   Sections (used in index.md)
   ------------------------- */
section[style*="var(--bg)"] {
  color: var(--text);
  background: var(--bg);
  border-bottom: 1px solid var(--line);
}

section[style*="var(--bg-elev)"] {
  color: var(--text);
  background: radial-gradient(900px 700px at 15% -10%, #1a1a1e 0, var(--bg-elev) 60%);
  border-top: 1px solid var(--line);
  border-bottom: 1px solid var(--line);
}

/* -------------------------
   Buttons & Tag Filters
   ------------------------- */
.btn-primary {
  background-color: var(--accent);
  border-color: var(--accent);
  color: #0b0b0c; font-weight: 600;

  &:hover, &:focus {
    background-color: #2fe894;
    border-color: #2fe894;
    color: #070708;
  }

  &:focus-visible {
    box-shadow: 0 0 0 0.2rem rgba(53,255,161,.35);
  }
}

.btn-outline-secondary {
  color: #34343a;
  border-color: #cfcfd6;
  background-color: #ffffff;

  &:hover {
    color: #0e0e10;
    border-color: var(--accent-2);
    background-color: #f7f9ff;
  }

  &.is-active,
  &.is-active:hover {
    color: #0b0b0c;
    background-color: var(--accent);
    border-color: var(--accent);
    text-shadow: 0 1px 0 rgba(0,0,0,.1);
  }

  &:focus-visible {
    box-shadow: 0 0 0 0.2rem rgba(122,162,255,.35);
  }
}

/* -------------------------
   Cards / Badges / Lists
   ------------------------- */
.card {
  border: 1px solid rgba(12,12,14,.07);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  transition: transform .18s ease, box-shadow .18s ease, border-color .18s ease;

  &:hover {
    transform: translateY(-2px);
    box-shadow: 0 14px 40px rgba(0,0,0,.22);
    border-color: rgba(12,12,14,.16);
  }

  .small { color: #6a6a73; }

  ul {
    padding-left: 1.1rem;
    li { margin-bottom: .35rem; }
  }
}

.badge {
  border-radius: 999px; font-weight: 600;

  &.text-bg-light {
    background: #f2f4f8 !important;
    color: #343a40 !important;
    border: 1px solid #e5e8ef;
  }
}

.badge-accent {
  background: rgba(53,255,161,.15);
  color: #0c2a1c;
  border: 1px solid rgba(53,255,161,.45);
}

/* -------------------------
   Hero image polish
   ------------------------- */
img[alt="Logo"] {
  filter: drop-shadow(0 6px 16px rgba(0,0,0,.25));
}

/* -------------------------
   Utilities
   ------------------------- */
.glow {
  color: var(--accent);
  text-shadow:
    0 0 4px rgba(53,255,161,.9),
    0 0 10px rgba(53,255,161,.6),
    0 0 18px rgba(53,255,161,.4);
}

h1.glow, h2.glow, h3.glow {
  text-shadow:
    0 0 6px rgba(53,255,161,.9),
    0 0 14px rgba(53,255,161,.6),
    0 0 24px rgba(53,255,161,.4);
}

/* Subtle underline lift on no-decoration links */
a.text-decoration-none:hover { text-decoration: underline; }

/* Improved focus ring for any button/link with .focus-ring helper */
.focus-ring:focus-visible {
  outline: 2px solid var(--accent-2);
  outline-offset: 3px;
  border-radius: 8px;
}

/* -------------------------
   Responsive
   ------------------------- */
@media (max-width: 991px) {
  .nav-list {
    padding: .75rem 0;
    flex-direction: column;

    .nav-link {
      padding: .5rem .8rem;
      width: 100%;
    }
  }

  .site-footer .footer-grid {
    grid-template-columns: 1fr;
    text-align: center;

    .footer-cell.left,
    .footer-cell.right { justify-self: center; }
  }
}

@media (max-width: 576px) {
  body { padding-bottom: 84px; }
}

/* -------------------------
   Optional: Compat Skin (bridge old markup)
   Remove once you switch to .site-header / .site-footer markup
   ------------------------- */
header.bg-dark,
.navbar.bg-dark {
  background: rgba(15,15,16,.55) !important;
  backdrop-filter: saturate(130%) blur(10px);
  border-bottom: 1px solid rgba(255,255,255,.05);
  box-shadow: 0 6px 30px rgba(0,0,0,.25);
}

footer.bg-dark,
footer.fixed-bottom {
  background:
    linear-gradient(180deg, rgba(53,255,161,.06), rgba(122,162,255,.05)),
    radial-gradient(700px 400px at 10% -20%, rgba(122,162,255,.08), transparent 60%),
    #0f0f10 !important;
  color: #e7e7ea !important;
  border-top: 1px solid #232327;
  box-shadow: 0 -12px 40px rgba(0,0,0,.35) inset;
}
